# Tested on tmux 3.5a

set -g prefix C-j
unbind C-b

bind C-j send-prefix
bind e setw synchronize-panes
bind c new-window -c '#{pane_current_path}'
bind f run-shell 'fzf-tmux-switcher-ssh'
bind -n C-d detach-client

set -g mouse on

set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

set -g status-interval 1
set -g status-justify 'absolute-centre'
set -g status-style 'bg=default'
set -g status-left '#[fg=#3f3f3f,bg=default]#[fg=#ffffff,bg=#3f3f3f]#S#[fg=#3f3f3f,bg=default]#[default]'
set -g status-right '#{prefix_highlight}'
setw -g window-status-format '#[fg=#3f3f3f,bg=default]#[fg=#ffffff,bg=#3f3f3f]#{?window_bell_flag,!,-} #I:#W #[fg=#3f3f3f,bg=default]#[default]'
setw -g window-status-current-format '#[fg=#8aadf4,bg=default]#[fg=#1e2030,bg=#8aadf4,bold]* #I:#W #[fg=#8aadf4,bg=default]#[default]'
setw -g window-status-bell-style 'none'
set -g message-style 'fg=#ffffff,bg=default'
set -g pane-active-border-style 'fg=#8aadf4'
set -g mode-style 'fg=#ffffff,bg=default'

set -g popup-border-lines 'rounded'
set -g popup-border-style 'fg=colour59'

set -g automatic-rename on
set -g automatic-rename-format '#{pane_current_command}@#{?#{==:#{pane_current_path},#{HOME}},~,#{basename:#{pane_current_path}}}'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-pain-control'

set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @prefix_highlight_output_prefix '#[fg=#8aadf4]#[bg=#1e2030]#[fg=#1e2030]#[bg=#8aadf4]'
set -g @prefix_highlight_output_suffix '#[fg=#8aadf4]#[bg=#1e2030]'
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_show_sync_mode 'on'
set -g @prefix_highlight_prefix_prompt 'Wait'
set -g @prefix_highlight_copy_prompt 'Copy'
set -g @prefix_highlight_sync_prompt 'Sync'

set -g @plugin 'roosta/tmux-fuzzback'
set -g @fuzzback-bind s
set -g @fuzzback-popup 1
set -g @fuzzback-popup-size '80%'

set -g @plugin 'lost-melody/tmux-command-palette'
set -g @cmdpalette-render-cmd 'bat -l md -f -pp'
set -g @cmdpalette-key-prefix 'prefix ?'

if 'test -f ~/.tmux.conf.local' 'source-file ~/.tmux.conf.local'

run '~/.tmux/plugins/tpm/tpm' # Keep this line at the end of conf.
